<html>

<head>
    <title>Test</title>
    <script src="/baremux/index.js"></script>
    <link rel="preload" href="/scram/scramjet.worker.js" as="script" crossorigin="anonymous" />
    <link rel="preload" href="/scram/scramjet.shared.js" as="script" crossorigin="anonymous" />

</head>

<body>
    <script src="/scram/scramjet.controller.js"></script>
    <script src="/main.js"></script>

    <form id="search-form">
        <input type="text" id="search" placeholder="Enter an URL" />
    </form>
    <iframe id="frame" src="" frameborder="2"></iframe>
    <script>
        const search = document.getElementById('search');
        const searchForm = document.getElementById('search-form');
        searchForm.addEventListener('submit', (e) => {
            e.preventDefault();
            var url = search.value;
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }
            const encodedUrl = scramjet.encodeUrl(url);
            document.getElementById('frame').src = window.location.origin + `${encodedUrl}`;
        });
    </script>
</body>

</html>