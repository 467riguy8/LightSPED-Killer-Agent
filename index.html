<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orbit</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Global Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden; /* Prevents scrollbars on main page */
        }

        body {
            /* Starry background simulation with a CSS gradient */
            background: radial-gradient(circle at center, #2a0a5a 0%, #0d011f 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column; /* Arrange content vertically */
            align-items: center;
            justify-content: flex-start; /* Start content from the top */
            color: white; /* Default text color */
            background-attachment: fixed;
        }

        /* Frosted Glass Effect */
        .frosted-glass {
            background-color: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* Top Bar (Always visible) */
        .top-bar-wrapper {
            position: fixed; /* Keep it fixed at the top */
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex; /* Always display flex */
            align-items: center;
            z-index: 10000;
            padding: 12px 24px;
            border-radius: 999px;
            gap: 16px;
        }

        .top-icons img {
            width: 28px;
            height: 28px;
            cursor: pointer;
            filter: brightness(0) invert(1); /* Invert for dark background */
            transition: transform 0.2s, opacity 0.2s;
            opacity: 0.9;
        }

        .top-icons img:hover {
            transform: scale(1.1);
            opacity: 1;
        }

        /* URL Bar within Top Bar */
        #urlBar {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            outline: none;
            padding: 6px 12px;
            border-radius: 999px;
            width: 300px;
            color: white;
            font-size: 14px;
        }

        #urlBar::placeholder {
            color: #ccc;
        }

        /* Battery and Time Display */
        .battery-time {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.1);
            font-size: 14px;
        }

        /* Main Content Area (holds different sections) */
        .content-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1; /* Allows it to take up available space and center content */
            width: 100%;
            padding-top: 100px; /* Space for the fixed top bar */
            position: relative; /* For absolute positioning of elements */
            z-index: 1; /* Ensure it's above the iframe when active */
        }

        /* Individual Sections */
        .page-section {
            display: none; /* Hidden by default, shown by JS */
            width: 100%;
            max-width: 4xl; /* Max width for content within sections */
            margin: 0 auto;
            padding: 1rem;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
        }

        /* Specific styling for the landing page */
        #mainContent.page-section {
            display: flex; /* Default view */
        }

        h1 {
            font-size: 64px;
            font-weight: bold;
            margin-bottom: 5px;
            text-shadow: 0 0 4px rgba(0, 0, 0, 0.5);
        }

        .subtitle {
            font-size: 22px;
            margin-bottom: 10px;
            text-shadow: 0 0 3px rgba(0, 0, 0, 0.5);
        }

        /* Search Container */
        .search-container {
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 999px;
            padding: 10px 16px;
            width: 360px;
            max-width: 90%;
            margin: 10px auto 0;
            gap: 10px;
        }

        .search-container input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: white;
            font-size: 14px;
        }

        .search-container button {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: bold;
            border-radius: 999px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: none;
        }

        .search-container button:hover {
            transform: scale(1.05);
        }

        /* Ping Indicator */
        .ping {
            margin: 18px auto 10px;
            font-size: 14px;
            border-radius: 20px;
            padding: 6px 20px;
            display: inline-block;
        }

        .green {
            color: #00ff00;
        }

        /* Socials/Navigation Icons on Main Page */
        .socials {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .socials .frosted-glass {
            padding: 10px;
            border-radius: 16px;
            display: flex;
            flex-direction: column; /* Stack icon and text */
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s;
            min-width: 100px; /* Ensure enough space for text */
        }

        .socials .frosted-glass:hover {
            transform: scale(1.1);
        }

        .socials img {
            width: 44px;
            height: 44px; /* Ensure consistent height */
            filter: invert(1); /* Invert for dark background */
            margin-bottom: 8px; /* Space between icon and text */
        }

        .socials span {
            font-size: 0.9rem;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.9);
        }

        /* Iframe Container */
        #iframeContainer {
            display: none; /* Hidden by default */
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 9998; /* Below the top bar */
            background: black; /* Solid background when iframe is active */
            transition: opacity 0.5s ease;
            opacity: 1;
        }

        #iframeContainer.fade-out {
            opacity: 0;
        }

        #iframeContainer.fade-in {
            opacity: 1;
        }

        #iframeContainer iframe {
            width: 100%;
            height: 100%;
            border: none;
            margin-top: 70px; /* Height of top bar + some padding */
            height: calc(100% - 70px); /* Remaining height */
        }

        /* Games, Apps, VM, Music specific styling */
        .game-embed-section, .app-card-grid, .vm-card, .music-player-section {
            width: 100%;
            max-width: 90%;
            margin-top: 2rem;
            padding: 1.5rem;
            border-radius: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .game-iframe-wrapper {
            width: 100%;
            height: 600px;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            margin-top: 1rem;
        }

        .app-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            border-radius: 1.5rem;
        }
        .app-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.2);
        }
        .start-vm-button {
            background-color: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 1rem 2rem;
            border-radius: 9999px;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            font-weight: 600;
        }
        .start-vm-button:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        /* Music Player Specific Styles */
        .music-player-section audio {
            width: 100%;
            max-width: 600px;
            margin-top: 1.5rem;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 0.75rem;
            padding: 0.5rem;
        }
        .current-song-info {
            margin-top: 1rem;
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.9);
            min-height: 1.5rem; /* Reserve space */
        }
        #songDropdown {
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 9999px; /* Pill shape */
            padding: 0.75rem 1.5rem;
            color: white;
            width: 100%;
            max-width: 400px;
            margin-bottom: 1.5rem;
            font-size: 1rem;
            outline: none;
            appearance: none; /* Remove default dropdown arrow */
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>');
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1.2em;
            cursor: pointer;
        }
        #songDropdown option {
            background-color: #1a053a; /* Dark background for options */
            color: white;
            padding: 0.5rem 1rem;
        }


        /* Responsive adjustments */
        @media (max-width: 768px) {
            h1 { font-size: 48px; }
            .subtitle { font-size: 18px; }
            .search-container { width: 95%; padding: 8px 12px; }
            .search-container input { font-size: 12px; }
            .search-container button { padding: 6px 12px; font-size: 12px; }
            .top-bar-wrapper { padding: 8px 16px; gap: 8px; }
            .top-icons img { width: 24px; height: 24px; }
            #urlBar { width: 200px; font-size: 12px; }
            .battery-time { font-size: 12px; }
            .game-embed-section, .app-card-grid, .vm-card, .music-player-section { padding: 1rem; }
            .game-iframe-wrapper { height: 400px; }
            .app-card { padding: 1rem; }
            .app-card img { width: 64px; height: 64px; }
            .app-card h3 { font-size: 1rem; }
            .app-card p { font-size: 0.875rem; }
            .start-vm-button { padding: 0.75rem 1.5rem; font-size: 1rem; }
            .socials .frosted-glass { min-width: 80px; padding: 8px; }
            .socials img { width: 36px; height: 36px; margin-bottom: 4px; }
            .socials span { font-size: 0.8rem; }
            .music-player-section audio { max-width: 100%; }
            #songDropdown { padding: 0.5rem 1rem; font-size: 0.9rem; }
        }
    </style>
</head>
<body>
    <!-- Top Bar (Always visible) -->
    <div id="topBar" class="top-bar-wrapper frosted-glass">
        <div class="top-icons">
            <img src="https://placehold.co/28x28/000000/FFFFFF?text=üè†" alt="Home" onclick="goHome()">
            <img src="https://placehold.co/28x28/000000/FFFFFF?text=üîô" alt="Back" onclick="goBack()">
            <img src="https://placehold.co/28x28/000000/FFFFFF?text=üîÑ" alt="Reload" onclick="reloadCurrentContent()">
            <!-- Link icon to open URL bar input -->
            <img src="https://placehold.co/28x28/000000/FFFFFF?text=üîó" alt="Link" onclick="toggleUrlBar()">
            <img src="https://placehold.co/28x28/000000/FFFFFF?text=</>" alt="Code/Settings" onclick="alert('Code/Settings functionality not implemented yet.')">
        </div>
        <!-- URL Bar - Initially hidden, toggled by Link icon -->
        <input type="text" id="urlBar" placeholder="Enter URL or search term" onkeydown="handleUrlBarEnter(event)" style="display: none;">
        <div class="battery-time">
            <span>64%</span>
            <span>11:11 PM</span>
        </div>
    </div>

    <!-- Main Content Area - Contains all different sections -->
    <div class="content-area">
        <!-- Main Landing Page Section -->
        <div id="mainContent" class="page-section">
            <h1>Orbit.</h1>
            <p class="subtitle">Welcome, User</p>

            <div class="search-container frosted-glass">
                <input type="text" id="mainSearchInput" placeholder="Search anything." onkeydown="handleMainSearchEnter(event)">
                <button onclick="performMainSearch()">
                    Enter &rarr;
                </button>
            </div>

            <div class="ping frosted-glass">
                <span class="green">ping: 12ms</span> ‚ù§Ô∏è Hope you enjoy Orbit
            </div>

            <!-- Socials/Navigation Icons -->
            <div class="socials">
                <div class="frosted-glass" onclick="showSection('gamesSection')">
                    <img src="https://placehold.co/44x44/000000/FFFFFF?text=üéÆ" alt="Games Icon">
                    <span>Games</span>
                </div>
                <div class="frosted-glass" onclick="showSection('appsSection')">
                    <img src="https://placehold.co/44x44/000000/FFFFFF?text=üì±" alt="Apps Icon">
                    <span>Apps</span>
                </div>
                <div class="frosted-glass" onclick="showSection('vmSection')">
                    <img src="https://placehold.co/44x44/000000/FFFFFF?text=üöÄ" alt="VM Icon">
                    <span>VM</span>
                </div>
                <div class="frosted-glass" onclick="showSection('musicSection')">
                    <img src="https://placehold.co/44x44/000000/FFFFFF?text=üé∂" alt="Music Icon">
                    <span>Music</span>
                </div>
            </div>
        </div>

        <!-- Games Section -->
        <div id="gamesSection" class="page-section">
            <h1 class="text-5xl font-extrabold mb-8 text-white text-shadow-lg drop-shadow-lg">üéÆ Game Hub üéÆ</h1>
            <section class="game-embed-section frosted-glass">
                <h2 class="text-3xl font-semibold mb-6 text-white text-center">Play Your Favorite Game!</h2>
                <div class="game-iframe-wrapper">
                    <!--
                        IMPORTANT:
                        Paste your game's HTML/JS code into the srcdoc attribute below.
                        Example: <iframe srcdoc="<!DOCTYPE html><html><body><h1>My Game!</h1></body></html>"></iframe>
                    -->
                    <iframe
                        class="w-full h-full"
                        srcdoc="
                            <!DOCTYPE html>
                            <html lang='en'>
                            <head>
                                <meta charset='UTF-8'>
                                <meta name='viewport' content='width=device-width, initial-scale=1.0'>
                                <title>Placeholder Game</title>
                                <style>
                                    body {
                                        margin: 0;
                                        overflow: hidden;
                                        display: flex;
                                        justify-content: center;
                                        align-items: center;
                                        height: 100vh;
                                        background-color: #333;
                                        color: white;
                                        font-family: sans-serif;
                                        text-align: center;
                                    }
                                    .game-container {
                                        background-color: #555;
                                        border-radius: 15px;
                                        padding: 20px;
                                        box-shadow: 0 0 20px rgba(0,0,0,0.5);
                                    }
                                    button {
                                        padding: 10px 20px;
                                        margin-top: 15px;
                                        border: none;
                                        border-radius: 8px;
                                        background-color: #4CAF50;
                                        color: white;
                                        font-size: 1.1em;
                                        cursor: pointer;
                                        transition: background-color 0.3s ease;
                                    }
                                    button:hover {
                                        background-color: #45a049;
                                    }
                                </style>
                            </head>
                            <body>
                                <div class='game-container'>
                                    <h1>Placeholder Game</h1>
                                    <p>This is where your awesome game will go!</p>
                                    <p>Please replace this content by pasting your game's HTML/JS into the iframe's `srcdoc` attribute.</p>
                                    <button onclick='alert(\"Game Started!\")'>Start Game</button>
                                </div>
                                <script>
                                    // Basic responsiveness for the iframe content
                                    window.addEventListener('resize', () => {
                                        console.log('Iframe resized!');
                                    });
                                </script>
                            </body>
                            </html>
                        "
                        allowfullscreen
                    ></iframe>
                </div>
            </section>
        </div>

        <!-- Apps Section -->
        <div id="appsSection" class="page-section">
            <h1 class="text-5xl font-extrabold mb-8 text-white text-shadow-lg drop-shadow-lg">üì± Application Hub üì±</h1>

            <p class="text-lg text-center mb-8 text-gray-200">
                <strong class="text-yellow-300">Note:</strong> Direct embedding of streaming services via iframes is often blocked due to security policies (like X-Frame-Options).
                Clicking the cards will open the services in a new tab. For true proxying, a backend proxy server is required.
            </p>

            <!-- Streaming Apps Section -->
            <section class="app-card-grid w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12 frosted-glass">
                <h2 class="col-span-full text-3xl font-semibold mb-4 text-white text-center">Streaming Services</h2>

                <!-- YouTube -->
                <a href="https://www.youtube.com" target="_blank" class="app-card frosted-glass p-6 rounded-3xl flex flex-col items-center text-center cursor-pointer">
                    <img src="https://placehold.co/100x100/FF0000/FFFFFF?text=YouTube" alt="YouTube Logo" class="w-24 h-24 mb-4 rounded-full shadow-md">
                    <h3 class="text-xl font-semibold text-white">YouTube</h3>
                    <p class="text-gray-300">Watch videos and subscribe to channels.</p>
                </a>

                <!-- Spotify -->
                <a href="https://www.spotify.com" target="_blank" class="app-card frosted-glass p-6 rounded-3xl flex flex-col items-center text-center cursor-pointer">
                    <img src="https://placehold.co/100x100/1DB954/FFFFFF?text=Spotify" alt="Spotify Logo" class="w-24 h-24 mb-4 rounded-full shadow-md">
                    <h3 class="text-xl font-semibold text-white">Spotify</h3>
                    <p class="text-gray-300">Listen to music and podcasts.</p>
                </a>

                <!-- Netflix -->
                <a href="https://www.netflix.com" target="_blank" class="app-card frosted-glass p-6 rounded-3xl flex flex-col items-center text-center cursor-pointer">
                    <img src="https://placehold.co/100x100/E50914/FFFFFF?text=Netflix" alt="Netflix Logo" class="w-24 h-24 mb-4 rounded-full shadow-md">
                    <h3 class="text-xl font-semibold text-white">Netflix</h3>
                    <p class="text-gray-300">Stream movies and TV shows.</p>
                </a>

                <!-- Hulu -->
                <a href="https://www.hulu.com" target="_blank" class="app-card frosted-glass p-6 rounded-3xl flex flex-col items-center text-center cursor-pointer">
                    <img src="https://placehold.co/100x100/1CE783/FFFFFF?text=Hulu" alt="Hulu Logo" class="w-24 h-24 mb-4 rounded-full shadow-md">
                    <h3 class="text-xl font-semibold text-white">Hulu</h3>
                    <p class="text-gray-300">On-demand and live TV streaming.</p>
                </a>

                <!-- Disney+ -->
                <a href="https://www.disneyplus.com" target="_blank" class="app-card frosted-glass p-6 rounded-3xl flex flex-col items-center text-center cursor-pointer">
                    <img src="https://placehold.co/100x100/113CCF/FFFFFF?text=Disney%2B" alt="Disney+ Logo" class="w-24 h-24 mb-4 rounded-full shadow-md">
                    <h3 class="text-xl font-semibold text-white">Disney+</h3>
                    <p class="text-gray-300">Disney, Pixar, Marvel, Star Wars, Nat Geo.</p>
                </a>

                <!-- Placeholder for more apps -->
                <div class="app-card frosted-glass p-6 rounded-3xl flex flex-col items-center text-center justify-center">
                    <span class="text-6xl text-gray-400 mb-4">+</span>
                    <h3 class="text-xl font-semibold text-white">Add More Apps</h3>
                    <p class="text-gray-300">Customize with your favorite applications.</p>
                </div>
            </section>

            <!-- Movies & TV Section -->
            <section class="w-full mb-12">
                <h2 class="text-3xl font-semibold mb-4 text-white text-center">Movies & TV Information</h2>
                <div class="frosted-glass p-6 rounded-3xl">
                    <p class="text-gray-200 mb-4">
                        This section could be expanded to include movie databases, TV show trackers,
                        or links to services that provide information about films and series.
                        For example, you could integrate APIs from TMDb, IMDb, or create a custom list.
                    </p>
                    <div class="flex flex-wrap justify-center gap-4">
                        <a href="https://www.imdb.com" target="_blank" class="px-4 py-2 rounded-lg bg-yellow-500 text-white font-medium hover:bg-yellow-600 transition-colors">IMDb</a>
                        <a href="https://www.rottentomatoes.com" target="_blank" class="px-4 py-2 rounded-lg bg-red-600 text-white font-medium hover:bg-red-700 transition-colors">Rotten Tomatoes</a>
                        <a href="https://www.themoviedb.org" target="_blank" class="px-4 py-2 rounded-lg bg-teal-500 text-white font-medium hover:bg-teal-600 transition-colors">TMDb</a>
                    </div>
                </div>
            </section>
        </div>

        <!-- VM Section -->
        <div id="vmSection" class="page-section">
            <main class="w-full max-w-5xl flex flex-col items-center mx-auto p-4">
                <!-- Main VM Card (Frosted Glass) -->
                <section class="vm-card w-full rounded-3xl overflow-hidden frosted-glass p-8 flex flex-col items-center justify-center text-center">
                    <h1 class="text-6xl font-extrabold text-white mb-2 drop-shadow-lg">Orbit VMs</h1>
                    <p class="text-3xl font-medium text-gray-200 mb-12">Powered By Google Labs</p>

                    <!-- Start VM Button -->
                    <button class="start-vm-button mb-12" onclick="startVm()">
                        <!-- Placeholder for computer icon -->
                        <img src="https://placehold.co/32x32/000000/FFFFFF?text=üíª" alt="Computer Icon" class="filter invert mr-3">
                        Start VM
                    </button>

                    <div class="flex flex-col md:flex-row items-center md:items-start justify-center gap-8 w-full">
                        <!-- Description Text -->
                        <div class="text-left max-w-xl">
                            <p class="text-lg text-gray-200 mb-4 leading-relaxed">
                                With Orbit VMs, you're free to browse without limits.
                                Test any link, switch to incognito for private sessions,
                                or use it as a second workspace. For now, we're using a
                                Google Labs-based model that looks like regular Google, but it's powered by a secure frontend for safer
                                browsing.
                            </p>
                            <p class="text-lg text-gray-200 leading-relaxed">
                                We're planning to upgrade to WarmwindOS soon for
                                even faster performance and responsiveness.
                            </p>
                        </div>

                        <!-- Placeholder for Browser Screenshot Image -->
                        <div class="w-full md:w-1/2 lg:w-2/5 rounded-2xl overflow-hidden shadow-xl border border-gray-700">
                            <img src="https://placehold.co/400x250/333333/FFFFFF?text=Browser+Screenshot" alt="Browser Screenshot" class="w-full h-auto object-cover">
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- Music Section -->
        <div id="musicSection" class="page-section">
            <h1 class="text-5xl font-extrabold mb-8 text-white text-shadow-lg drop-shadow-lg">üé∂ Music Player üé∂</h1>
            <section class="music-player-section frosted-glass">
                <h2 class="text-3xl font-semibold mb-6 text-white text-center">Your Provided Music</h2>
                <div id="currentSongInfo" class="current-song-info">No song selected</div>
                <audio id="audioPlayer" controls></audio>

                <select id="songDropdown" class="mt-4">
                    <option value="">-- Select a Song --</option>
                    <!-- Songs will be dynamically loaded here by JavaScript -->
                </select>
            </section>
        </div>
    </div>

    <!-- Iframe Container for loading external pages (e.g., Google for VM) -->
    <div id="iframeContainer">
        <iframe id="contentIframe" src="about:blank" allowfullscreen></iframe>
    </div>

    <script>
        const mainContent = document.getElementById('mainContent');
        const gamesSection = document.getElementById('gamesSection');
        const appsSection = document.getElementById('appsSection');
        const vmSection = document.getElementById('vmSection');
        const musicSection = document.getElementById('musicSection');
        const iframeContainer = document.getElementById('iframeContainer');
        const contentIframe = document.getElementById('contentIframe');
        const topBar = document.getElementById('topBar');
        const urlBar = document.getElementById('urlBar');
        const mainSearchInput = document.getElementById('mainSearchInput');

        const audioPlayer = document.getElementById('audioPlayer');
        const currentSongInfo = document.getElementById('currentSongInfo');
        const songDropdown = document.getElementById('songDropdown'); // Renamed from songList


        const allSections = [mainContent, gamesSection, appsSection, vmSection, musicSection];

        let historyStack = [];
        let historyIndex = -1;

        // Define your songs here!
        // IMPORTANT: Place your audio files in an 'audio' folder next to index.html.
        // Update the 'src' property with the correct path to your file.
        const songs = [
            { title: 'Synthwave Dream', src: 'audio/synthwave_dream.mp3' },
            { title: 'Lofi Study Beats', src: 'audio/lofi_study_beats.mp3' },
            { title: 'Epic Orchestral Journey', src: 'audio/epic_orchestral_journey.mp3' },
            { title: 'Chillhop Vibes', src: 'audio/chillhop_vibes.mp3' },
            { title: 'Cyberpunk Cityscape', src: 'audio/cyberpunk_cityscape.mp3' },
            { title: 'Acoustic Morning', src: 'audio/acoustic_morning.mp3' },
            { title: 'Deep House Groove', src: 'audio/deep_house_groove.mp3' },
            { title: 'Fantasy Forest Ambient', src: 'audio/fantasy_forest_ambient.mp3' },
            { title: 'Retro Arcade Theme', src: 'audio/retro_arcade_theme.mp3' },
            { title: 'Smooth R&B Flow', src: 'audio/smooth_rnb_flow.mp3' },
            { title: 'Inspiring Cinematic Score', src: 'audio/inspiring_cinematic_score.mp3' },
            { title: 'Jazzy Lounge', src: 'audio/jazzy_lounge.mp3' },
            { title: 'Driving Rock Anthem', src: 'audio/driving_rock_anthem.mp3' },
            { title: 'Peaceful Piano Melody', src: 'audio/peaceful_piano_melody.mp3' },
            { title: 'Tropical Beach Chill', src: 'audio/tropical_beach_chill.mp3' }
        ];

        // Function to populate the dropdown list
        function populateSongDropdown() {
            // Clear existing options, keeping the first placeholder option
            songDropdown.innerHTML = '<option value="">-- Select a Song --</option>';
            songs.forEach((song, index) => {
                const option = document.createElement('option');
                option.value = index; // Use index to easily retrieve song object
                option.textContent = song.title;
                songDropdown.appendChild(option);
            });
        }

        // Function to show a specific section and hide others
        function showSection(sectionToShowId) {
            allSections.forEach(section => {
                section.style.display = 'none';
            });
            iframeContainer.style.display = 'none'; // Hide iframe when showing a section
            contentIframe.src = 'about:blank'; // Clear iframe content

            const sectionToShow = document.getElementById(sectionToShowId);
            if (sectionToShow) {
                sectionToShow.style.display = 'flex'; // Use flex for centering/layout
            }
            urlBar.value = ''; // Clear URL bar
            urlBar.style.display = 'none'; // Hide URL bar by default
            addToHistory(sectionToShowId); // Add section ID to history

            // Special handling for music section: populate dropdown when shown
            if (sectionToShowId === 'musicSection') {
                populateSongDropdown();
                songDropdown.value = ''; // Reset dropdown selection
                audioPlayer.pause(); // Pause any playing music
                audioPlayer.src = ''; // Clear audio source
                currentSongInfo.textContent = 'No song selected';
            }
        }

        // Function to show the iframe and hide all sections
        function showIframe(url) {
            allSections.forEach(section => {
                section.style.display = 'none';
            });
            iframeContainer.style.display = 'block';
            contentIframe.src = url;
            addToHistory(url);
            // updateUrlBar is called by iframe onload event listener
        }

        // Function to update the URL bar with the current iframe source or section name
        function updateUrlBar() {
            if (iframeContainer.style.display === 'block') {
                try {
                    // This might throw a security error for cross-origin iframes
                    urlBar.value = contentIframe.contentWindow.location.href;
                } catch (e) {
                    // Fallback to the last known URL if cross-origin
                    urlBar.value = historyStack[historyIndex] || '';
                }
            } else {
                // If a section is visible, display its name or a friendly URL
                const activeSection = allSections.find(section => section.style.display === 'flex');
                if (activeSection) {
                    switch (activeSection.id) {
                        case 'mainContent': urlBar.value = 'orbit://home'; break;
                        case 'gamesSection': urlBar.value = 'orbit://games'; break;
                        case 'appsSection': urlBar.value = 'orbit://apps'; break;
                        case 'vmSection': urlBar.value = 'orbit://vm'; break;
                        case 'musicSection': urlBar.value = 'orbit://music'; break;
                        default: urlBar.value = ''; break;
                    }
                }
            }
        }

        function hideIframe() {
            iframeContainer.classList.add('fade-out');
            setTimeout(() => {
                iframeContainer.style.display = 'none';
                contentIframe.src = 'about:blank'; // Clear iframe content
                mainContent.style.display = 'flex'; // Go back to main content
                iframeContainer.classList.remove('fade-out');
                historyStack = []; // Clear history when going home
                historyIndex = -1;
                urlBar.value = ''; // Clear URL bar
                urlBar.style.display = 'none'; // Hide URL bar by default
            }, 500); // Match CSS transition duration
        }

        function addToHistory(entry) {
            // Remove any forward history if we're not at the end
            if (historyIndex < historyStack.length - 1) {
                historyStack = historyStack.slice(0, historyIndex + 1);
            }
            historyStack.push(entry);
            historyIndex = historyStack.length - 1;
            updateUrlBar(); // Update URL bar immediately after history change
        }

        function goBack() {
            if (historyIndex > 0) {
                historyIndex--;
                const prevEntry = historyStack[historyIndex];
                if (prevEntry.startsWith('http://') || prevEntry.startsWith('https://')) {
                    showIframe(prevEntry);
                } else {
                    showSection(prevEntry);
                }
            } else {
                // If no more history, and not on main content, go home
                if (mainContent.style.display === 'none') {
                    goHome();
                }
            }
        }

        function goHome() {
            hideIframe(); // This will reset to mainContent
            showSection('mainContent'); // Ensure main content is explicitly shown
        }

        function reloadCurrentContent() {
            if (iframeContainer.style.display === 'block') {
                contentIframe.contentWindow.location.reload();
            } else {
                // If on a section, simulate reload by re-showing it
                const activeSection = allSections.find(section => section.style.display === 'flex');
                if (activeSection) {
                    showSection(activeSection.id);
                }
            }
        }

        function toggleUrlBar() {
            urlBar.style.display = urlBar.style.display === 'none' ? 'block' : 'none';
            if (urlBar.style.display === 'block') {
                urlBar.focus();
                updateUrlBar(); // Populate with current content URL if visible
            }
        }

        function performSearch(query) {
            if (query) {
                let target = query.toLowerCase();
                if (target === 'games') {
                    showSection('gamesSection');
                } else if (target === 'apps') {
                    showSection('appsSection');
                } else if (target === 'vm' || target === 'orbit vm') {
                    showSection('vmSection');
                } else if (target === 'music') {
                    showSection('musicSection');
                } else if (query.startsWith('http://') || query.startsWith('https://')) {
                    showIframe(query); // Direct URL
                } else {
                    // Default to Google search if not a known page or full URL
                    showIframe(`https://www.google.com/search?q=${encodeURIComponent(query)}`);
                }
            }
        }

        function performMainSearch() {
            const query = mainSearchInput.value.trim();
            performSearch(query);
            mainSearchInput.value = ''; // Clear search input
        }

        function handleMainSearchEnter(event) {
            if (event.key === 'Enter') {
                performMainSearch();
            }
        }

        function handleUrlBarEnter(event) {
            if (event.key === 'Enter') {
                const url = urlBar.value.trim();
                if (url) {
                    let targetUrl = url;
                    if (!(url.startsWith('http://') || url.startsWith('https://'))) {
                        targetUrl = `https://${url}`; // Prepend https if no protocol
                    }
                    performSearch(targetUrl); // Use performSearch for consistency
                }
                urlBar.style.display = 'none'; // Hide URL bar after search
            }
        }

        // Function for the "Start VM" button inside the VM section
        function startVm() {
            showIframe('https://www.google.com');
        }

        // Music Player Logic
        songDropdown.addEventListener('change', (event) => {
            const selectedIndex = event.target.value;
            if (selectedIndex !== "") {
                const selectedSong = songs[selectedIndex];
                audioPlayer.src = selectedSong.src;
                currentSongInfo.textContent = `Now playing: ${selectedSong.title}`;
                audioPlayer.play().catch(error => {
                    console.error("Error playing audio:", error);
                    currentSongInfo.textContent = `Failed to play: ${selectedSong.title}. Please click play manually.`;
                });
            } else {
                audioPlayer.pause();
                audioPlayer.src = '';
                currentSongInfo.textContent = 'No song selected';
            }
        });


        // Update URL bar when iframe content loads
        contentIframe.onload = () => {
            updateUrlBar();
        };

        // Initialize display: Ensure main content is visible on load
        window.onload = () => {
            showSection('mainContent'); // Start on the main landing page
        };
    </script>
</body>
</html>
